@model IPagedList<donk.Models.Products>

@using X.PagedList.Mvc.Core;
@using X.PagedList;

@{
    ViewData["Title"] = "搜尋商品";
}


@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success">
        @TempData["SuccessMessage"]
    </div>
}

<link href="~/css/product.css" rel="stylesheet" />


<form asp-action="Index" method="get" class="mb-4">
    <div class="row g-2 align-items-center">
        <!-- 搜尋商品輸入框 -->
        <div class="col-md-11 col-sm-12">
            <label for="searchString" class="form-label visually-hidden">搜尋商品</label>
            <input type="text" name="searchString" class="form-control" placeholder="搜尋商品" value="@ViewData["CurrentFilter"]" />
        </div>

        <!-- 搜尋按鈕 -->
        <div class="col-md-1 col-sm-12">
            <button type="submit" class="btn btn-primary w-100">搜尋</button>
        </div>
    </div>
</form>

@if (Model.Any())
{
    <div class="product-grid">
        @foreach (var product in Model)
        {
            <div class="product-card">
                <img src="@Url.Content(product.ImageData)" alt="@product.Name" class="product-image" />
                <h3 class="product-name">@product.Name</h3>
                <p class="product-description">@product.Description</p>
                <p class="product-price">@Html.DisplayFor(m => product.Price)</p>
                <form asp-action="AddToCart" method="post">
                    <input type="hidden" name="productId" value="@product.Id" />
                    <button type="submit" class="btn btn-success">加入購物車</button>
                </form>
            </div>

        }
    </div>

    <!-- 分頁按鈕 -->
    <div class="pagination-container">
        @Html.PagedListPager(Model, page => Url.Action("Index", new { page, searchString = ViewData["CurrentFilter"] }))
    </div>

}
else
{
    <p>找不到符合條件的商品。</p>
}


